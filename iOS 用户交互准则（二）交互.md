# iOS用户交互准则（二）交互
## 3D Touch
3D Touch 的出现使触摸交互增加了新的维度。在支持该技术的设备上，用户可以通过施加不同级别的按压就使用额外的功能。应用可以通过弹出一个菜单、显示格外的内容或者动画效果来相应用户的操作。用户不需要学习新的手势来与 3D Touch 交互。当他们轻按屏幕并得到反馈时，他们会很快的发现这个新添加的交互维度。  
#### 主屏幕交互
在主屏幕上，按压一个支持 3D Touch 应用的图标，它会显示一个行为视图。这个视图可以让你快捷执行特定的应用任务或看到你感兴趣的信息。比如日历这个应用，会提供一个创建事件的快捷方式，也可以显示你日程的下一个事件。
#### Peek 和 Pop
Peek（速览）可以使用户借助 3D Touch 在一个暂时出现在当前界面内容之上的小块视图中来预览一个事项，比如一个页面、链接或文件。只要在支持速览功能的事项上按压即可看到效果，松开手指时 Peek 就会结束。要看到更多细节，只需要增加一些按压力度，该事项就会弹出并全屏（Pop）。在一些 Peek 视图中，你可以向上轻扫屏幕，此时会出现相关的操作按钮。比如，当你在 Safari 中速览一个链接时，可以向上轻扫屏幕，这时会在背景中显示出打开这个链接的按钮、收藏链接到待读列表的按钮以及拷贝链接的按钮。
###### 使用 Peek 预览生动丰富的内容
理想情况下，Peek 可以给予用户足够的关于事项的信息来增强当前任务，或者帮助用户决定是否投入执行这个事项。比如，在邮件中预览一个链接地址，以便决定是在 Safari 中打开，还是分享给朋友。速览还常常用在表格中，使用户在不用选取某行的情况下查看它的详细信息。  
###### 设计足够大的 Peek 视图
设计一个足够大的 Peek 视图，以便用户的手指不会遮挡住它的内容。让 Peek 视图中的信息足够详细以便帮助用户决定是否要通过增加按压的力度来完全打开这个事项。
###### 保持 Peek 和 Pop 的一致性
如果你仅在一些地方支持了 Peek 和 Pop 而另一些地方不支持，那么用户就会困惑于不知道该在哪里使用这个特性，也可能会觉得你的应用或者他的设备出现了问题。
###### 允许 Peek 的同时也实现 Pop
即使 Peek 可以给予用户大部分他们需要的信息，也应在他们决定离开当前任务而聚焦这个事项时，可以过渡到 Pop 模式。Pop 模式中应该显示与 Peek 模式中同样的内容。  
###### 避免在 Peek 中直接出现像按钮一类的元素
如果用户手指离开屏幕去点击像按钮一样的元素，Peek 视图就会消失。  
###### 不要在一个事项中同时使用 Peek 和 Edit Menu
当 Peek 和 Edit Menu（编辑菜单）同时对一个事项可用时，会使用户感到困惑，也会让系统难以探知相关操作的意图。
###### 在恰当的时候使用按钮
并不是所有的 Peek 都需要按钮的，但是这确实是一个很棒的快捷方式来完成普通的任务。如果你的应用已经对事项提供了长按手势操作，那么在 Peek 时提供同样的操作会是一个不错的实践。  
###### 避免在 Peek 模式中通过按钮来打开事项
当用户在 Peek 模式中，通常通过增加按压力度来打开一个事项。所以这里没有必要再提供一个明显的打开按钮。  
###### 不要让 Peek 成为执行事项操作的唯一方式
不是所有的设备都支持 Peek 和 Pop 的，而且有的用户可能会关闭 3D Touch 这个功能。所以在这种情况下，你的应用应该提供其他方式来触发事项的相关操作。比如，你的应用可以在一个用户触摸按压事项时显示的视图中照搬 Peek 模式的快捷操作。  
#### Live Photos
应用可以通过支持 Live Photos 在照片浏览体验中整合按压操作。当你按压支持 Live Photos 的照片，它们会活过来，用图像和声音来展示照片拍摄前后一小段时间的活动。  
## 辅助功能
iOS 为盲人、聋哑人等有残疾的人群提供了大量的辅助功能。大部分基于 UIKit 的应用只要稍作改进就可以融合这些辅助功能，从而让更多人使用你的应用并使他们拥有同样迷人的体验。  
#### 为图片、图标等界面元素提供可替换的文本说明标签
可替换的文本说明标签不会显示在屏幕上，但是可以通过 VoiceOver 的朗读描述，从而让那些有视力障碍的用户知道屏幕上有什么，给他们提供更加便利的导航。  
#### 对辅助功能作出响应
如果你的应用使用了 UIKit 来创建界面，文本和其他界面元素，这些元素将自动适应某些辅助功能，比如加粗、加大字体等。你的应用应该也在恰当的时候去检查和响应辅助功能，比如当减少移动的选项被开启时。使用个性化字体的应用应该尝试实现系统字体的那些辅助效果。  
#### 测试你的应用的辅助功能
除了对文本和动作的改变，辅助功能还会改变对比度、反转颜色、降低透明度等。像使用这些功能的用户一样去激活这些设置，然后观察你的应用会变成什么样。  
#### 包含隐藏式字幕和声音描述
隐藏式字幕使聋的、有听力障碍的用户理解对话或其它语音内容。语音描述则使那些有视力障碍的用户了解重要的视频内容信息。  
## 音频
不论声音是你应用的主要方面还是只是点缀，你都要知道用户是如何期待声音表现的，并且去处理这些期待。
用户可以通过音量大小按钮、静音开关、耳机控制或者屏幕上的音量滑块来操纵声音。许多第三方配件也包含声音控制的功能。音频可以通过内部或外部扬声器、耳机、无线的 AirPlay 或者蓝牙设备播放。  
  
- 静音：用户设置他们的设备为静音来避免意外声音的打扰，比如电话铃声或者短信提醒。他们也会想关闭不重要的声音，包括键盘音、一般的音效、游戏的背景音乐和其他声音反馈。当设备被设置为静音，只有明确启动的声音可以出现，比如媒体回放、闹钟、音频或视频信消息。  
- 音量：无论使用物理按钮或者屏幕滑块，音量的调节都作用于整个系统中所有的声音，包括音乐或者应用内的音效。只有来电铃声是例外，总是在音频没有有主动播放时独立调整。  
- 耳机：用户使用耳机来听取音频信息，以保持隐私并解放他们的双手。当用户插入耳机时，他们希望声音自动流畅的转入耳机播放。当拔出耳机时，他们希望正在播放的内容立即暂停。  

#### 必要时自动调整音量等级，当不是整个系统的音量
你的应用可以相对独立的调整音量，来实现很好的音效配合。但无论如何，最终的输出音量还是要在系统音量的控制下。  
#### 适当的时候允许改变音频通道
用户常常想要选择不同的音频输出设备。比如，他们可能想要通过起居室的立体声音箱、车内收音机或 Apple TV 来听音乐。去支持这些场景，除非你有令人信服的理由。  
#### 使用系统提供的音量调节视图来调节音量
为调节音频提供界面控制的最好方式就是使用音量调节视图。这个视图是可定制的，包括一个音量调节滑块，还有一个改变音频通道的控件。想了解更多细节，可以查看 MPVolumeView。  
#### 对于短音效和震动使用系统声音服务
了解更多细节，可以查看 **系统音效服务**。  
#### 当声音对你的应用来说是必需的话，请将音频归类
不同的音频归类会有不同的处理方式，如让声音通过静音开关实现静音，与其它音效混合，或者当你的应用处于后台时仍然播放音频。选择一个类别要基于它的意义和当前设备的音频状态，并将它分配你的音频区域。比如，如果没有必要，不要打断正在播放的另一个应用的音乐。一般来说，当你的应用在运行时，最好避免改变类别，除非是录音类的应用。了解更多细节，可以查看 **音频区域编程指南**  

| 类别 | 含义    |  行为  |  
| -------- | :-----: | :----: |  
| **Solo ambient** | 声音不是必须的，但它需要关闭其他音频。比如，一款游戏中的音效。 | 受静音开关控制。不会与其他音效混合。不会在后台播放。 |
| **Ambient** | 声音不是必须的，也不需要关闭其他音频。比如，游戏中允许后台其它应用播放音乐而不使用自带的音乐。 | 受静音开关控制。会与其它音效混合。不会在后台播放。 |
| **Playback** | 声音是必须的，可能会和其它音效混合。比如，有声读物或一款教外语的教育应用，用户可能会想要在后台也能继续播放 | 不受静音开关控制。可能会也可能不会与其它音频混合。可以在后台播放 |
| **Record** | 声音会被录制。比如，一款提供语音录制的笔记应用。这类应用，如果用户播放了录制的语音笔记，可以切换到 Playback 类别 | 不受静音开关控制。不会与其它音效混合。可以在后台播放。 |
| **Play and record** | 声音会被录制和播放，并可能同时进行。比如，一款音频短信或视频通话应用 | 不受静音开关控制。可能会也可能不会与其它音频混合。可以在后台录制与播放。 |  
#### 在适当的时候恢复被打断播放的音频
有时，正在播放的音频会被另一个不同的应用打断。比如有电话打进来时，这种情况视为可恢复的暂时打断；另一个是不需恢复的永久打断，比如 Siri 开启了音乐播放列表。当一个可恢复的打断发生时，如果音频正在播放时被你的应用打断，那么应该在打断结束时恢复播放。比如，一款游戏正在播放的音效或一个多媒体应用正在播放音频中，这些情况都应恢复。一款应用没有播放音频的话，当打断发生时就不需要恢复。  
#### 当你的应用播放完临时的音频时让其它应用知道
如果你的应用可能临时打断其它应用的音频，就应该适当的标记音频区域以便在可以恢复播放时让其它应用得到通知。要了解更多细节，可以查看 **AVFoundation中的常量AVAudioSessionSetActiveOptionNotifyOthersOnDeactivation**  
#### 只在合适的时候响应音频控制
用户可以在你的应用界面以外的地方控制音频播放，比如在控制中心或者他们的耳机，不管你的应用处于前台还是后台。如果你的应用正在播放一段音频内容，在一个清晰的相关语境中，或链接着一台能使用 AirPlay 的设备，那么可以响应音频播放。否则的话，当用户触发控制时，你的应用不应该停止另一个可能正在播放音频的应用。  
#### 不要改变音频控制
在所有应用中，用户对音频控制的效果是有一致预期的。永远不要重新定义一项音频控制的意义。如果你的应用不支持某个控制器，那么只要不响应它即可。  
## 验证
仅在需要价值兑换的时候验证用户，比如个性化体验、访问额外的特性、购买内容或者同步数据。如果你的应用必须验证，保持登录过程快捷、简单并且不突兀，这样才不会降低你的应用的乐趣。
#### 尽量延后登录操作
在用户什么都没做时就被迫登录往往会导致他们放弃该应用。在给予承诺之前应给他们一个机会去爱上你的应用。在一款购物类应用中，让用户在运行后立刻可以浏览你的商品，只有当他们准备要购买时再请求登录。在一款流媒体应用中，让用户在登录之前先探索你的内容并知道你能提供给他们什么。  
#### 解释验证的收益以及怎样注册你的服务
如果你的应用必须验证，那请展示一段简短、友好的解释文字在登录界面中描述一下注册的原因及这样做的好处。还有，记住不是所有使用你应用的人都在一开始就有一个账户。确保你解释了怎样注册一个帐号以及提供了一个简单的应用内注册方式。  
#### 通过显示合适的键盘来方便数据输入
当你的应用请求用户的邮箱地址时，比如，用户输入邮箱地址时显示电子邮件键盘，因为它包含了有用的快捷方式。  
## 数据输入
无论是通过轻点界面元素还是使用键盘，数据输入都是一个乏味的过程。当一个应用在用户做任何有用的事之前，就需要进行大量数据输入操作时，用户会很快感到沮丧，甚至可能完全放弃使用这个应用。  
#### 如果可能的话优先使用选项
使数据输入尽量快捷有效。比如优先考虑使用选择器或者表格而不用文本框，因为相比输入一串答案，从一系列预设选项中直接选择会更加简单。  
#### 可能的话尽量从系统中获取信息
对那些能够自动收集或者只需用户许可就可以得到的信息，不要让用户手动提供。比如联系人和日历信息。  
#### 提供合理的默认值
对于范围内选值项目，应预设为用最可能的值。通过预填合适的默认值，以便最小化决策成本和提高流程速度。  
#### 只有在收集了足够的信息之后再继续
在进行下一步或继续的操作之前，确保获取了所有的必要内容。使用这些按钮的可用性作为视觉提示，来表明可以继续流程。
#### 动态验证输入框值
在填完一个冗长的表格后再回头去修改其中的错误是很让人沮丧的事。只要可能，应该再用户输入之后立刻检查输入框的值，以便他们及时纠正。  
#### 只有在必要的时候才设置为必填项
只有在流程中确实需要某信息的情形下才使用必填项。  
#### 值列表中轻松导航
尤其是在表格和选择器中，应该做到轻松选值。可以考虑将值列表按照字母顺序或其它逻辑方式排序，以便用户快速找到选项并选取。  
#### 在输入框中显示一个提示来传达意图
一个输入框在初始状态时可以包含占位文本，比如“邮箱”或“密码”等。如果占位文本可以满足需要，就不要使用标签（Label）来描述一个输入框。

